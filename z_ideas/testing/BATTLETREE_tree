
class BattleTree {
  constructor(serialized) {
    if(serialized){
      this.unlocked = serialized.unlocked;
      this.children = this._unserialize_children(serialized.children);
    } else{
      this.unlocked = null;
      this.children = [];
    }
  }

  _serialize_children() {
    var serialized = [];
    for (var c in this.children){
      if(this.children[c].serialize) { // object
        serialized.push(this.children[c].serialize());
      } else { // raw type
        serialized.push(this.children[c]);
      }
    }
    return serialized;
  }

  _unserialize_children(array) {
    var unserialized = [];
    for (var c in array){
      if(array[c].unlocked) { // object
        unserialized.push(new BattleTree(array[c]));
      } else { // raw type
        unserialized.push(array[c]);
      }
    }
    return unserialized;
  }

  serialize() {
    return {
      "unlocked": this.unlocked,
      "children": this._serialize_children(),
    };
  }

  add_child(c){
    if(this.children.includes(c)) { return; }
    this.children.push(c);
  }

}
